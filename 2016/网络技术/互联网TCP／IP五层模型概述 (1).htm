<!DOCTYPE html>
<html>
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <script src="http://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
    <!--link( rel="stylesheet" href="http://c.csdnimg.cn/public/common/toolbar/css/index.css" )-->
    <link rel="stylesheet" href="http://csdnimg.cn/public/common/libs/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="http://csdnimg.cn/public/static/css/avatar.css">
    <link rel="stylesheet" href="/static/css/common.css">
    <!-- [if IE 7]-->
    <!--link( rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" )-->
    <!-- [endif]-->
    <link rel="stylesheet" href="/static/css/main.css">
    <!-- [if lt IE 9]-->
    <script src="/static/js/libs/html5shiv.min.js"></script>
    <!-- [endif]-->
    <title>互联网TCP／IP五层模型（一）</title>
    <script type="text/javascript" src="/static/js/apps/blog_mobile.js"></script>

    <script language="javascript" type="text/javascript" src="http://ads.csdn.net/js/async_new.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?6bcd52f51e9b3dce32bec4a3997715ac";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
   
</head>
<body>
    
<!-- 广告位开始 --> 
<ins data-revive-zoneid="202" data-revive-id="8c38e720de1c90a6f6ff52f3f89c4d57"></ins> 
<!-- 广告位结束 -->


<script language='JavaScript' type='text/javascript' src='http://download.csdn.net/js/jquery.cookie.js'></script>
<script type="text/javascript" src="http://c.csdnimg.cn/rabbit/search-service/main.js"></script>
<script type="text/javascript">
    var fileName = '41961917';
    var commentscount = 1;
    var islock = false;
    var currentUserName='';
    
</script>

<script  type="text/javascript" src="/static/js/digg.js"></script>


<div class="blog_main">
      <div class="blog_top_wrap">
        <div class="blog_top"><i id="menu_J" class="iconfont icon_l">&#xe600;</i>
            <form  method="get" action="/search/index" id="searchform">
    <i id="search_J" class="iconfont icon_r">&#xe601;</i>
    <div id="search_c_J" class="search">
         <input type="text" placeholder="请输入" id="search" name="keyword" page="1" value=""><i class="iconfont icon_search">&#xe601;</i><i class="iconfont icon_close">&#xe60c;</i>
    </div>
</form>
<script  type="text/javascript" src="/static/js/search.js"></script>




          <h2 class="blog_top_t">CSDN博客</h2>
        </div>
      </div>

 

      <div class="main_list">
     

          <script type="text/javascript">             
              var cpro_id = "u2901270";
        </script>
        <script type="text/javascript" src="http://cpro.baidustatic.com/cpro/ui/cm.js"></script>


        <div class="blog_article">
          <div class="blog_article_t">
            <div class="article_l"><a href="/blog/index?username=u011450537"><img src="http://avatar.csdn.net/C/6/B/1_u011450537.jpg" alt="img"></a>
                <a href="/blog/index?username=u011450537" class="article_user">u011450537</a></div>
            <div class="article_r">
            </div>
          </div>
          <div class="blog_article_c clearfix">
            <h3 class="article_t">互联网TCP／IP五层模型（一）</h3>
            <p class="date"><i>发表于</i><em>2014/12/16 16:20:19  &nbsp;</em><i>1411</i><span>人阅读</span></p>
            <p class="category_p">
                    分类：
                        <span>TCP/IP</span>
            </p>
             
<div class="article_c">

<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
转载自：<span style="color:rgb(85,102,119); font-family:Georgia,serif; font-size:18px; letter-spacing:-0.11999999731779099px; line-height:21.59375px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)"><a target="_blank" href="http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html">阮一峰</a></span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
我们每天使用互联网，你是否想过，它是如何实现的？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
全世界几十亿台电脑，连接在一起，两两通信。上海的某一块网卡送出信号，洛杉矶的另一块网卡居然就收到了，两者实际上根本不知道对方的物理位置，你不觉得这是很神奇的事情吗？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
互联网的核心是一系列协议，总称为&quot;互联网协议&quot;（Internet Protocol Suite）。它们对电脑如何连接和组网，做出了详尽的规定。理解了这些协议，就理解了互联网的原理。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
下面就是我的学习笔记。因为这些协议实在太复杂、太庞大，我想整理一个简洁的框架，帮助自己从总体上把握它们。为了保证简单易懂，我做了大量的简化，有些地方并不全面和精确，但是应该能够说清楚互联网的原理。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
=================================================</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">互联网协议入门</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
作者：阮一峰</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052901.jpg" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">一、概述</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">1.1 五层模型</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
互联网的实现，分成好几层。每一层都有自己的功能，就像建筑物一样，每一层都靠下一层支持。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
用户接触到的，只是最上面的一层，根本没有感觉到下面的层。要理解互联网，必须从最下层开始，自下而上理解每一层的功能。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
如何分层有不同的模型，有的模型分七层，有的分四层。我觉得，把互联网分成五层，比较容易解释。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052902.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
如上图所示，最底下的一层叫做&quot;实体层&quot;（Physical Layer），最上面的一层叫做&quot;应用层&quot;（Application Layer），中间的三层（自下而上）分别是&quot;链接层&quot;（Link Layer）、&quot;网络层&quot;（Network Layer）和&quot;传输层&quot;（Transport Layer）。越下面的层，越靠近硬件；越上面的层，越靠近用户。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
它们叫什么名字，其实并不重要。只需要知道，互联网分成若干层就可以了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">1.2 层与协议</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
每一层都是为了完成一种功能。为了实现这些功能，就需要大家都遵守共同的规则。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
大家都遵守的规则，就叫做&quot;协议&quot;（protocol）。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
互联网的每一层，都定义了很多协议。这些协议的总称，就叫做&quot;互联网协议&quot;（Internet Protocol Suite）。它们是互联网的核心，下面介绍每一层的功能，主要就是介绍每一层的主要协议。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">二、实体层</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
我们从最底下的一层开始。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
电脑要组网，第一件事要干什么？当然是先把电脑连起来，可以用光缆、电缆、双绞线、无线电波等方式。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052903.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">这就叫做&quot;实体层&quot;，它就是把电脑连接起来的物理手段。它主要规定了网络的一些电气特性，作用是负责传送0和1的电信号。</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">三、链接层</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">3.1 定义</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
单纯的0和1没有任何意义，必须规定解读方式：多少个电信号算一组？每个信号位有何意义？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">这就是&quot;链接层&quot;的功能，它在&quot;实体层&quot;的上方，确定了0和1的分组方式。</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">3.2 以太网协议</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
早期的时候，每家公司都有自己的电信号分组方式。逐渐地，一种叫做<a target="_blank" href="http://zh.wikipedia.org/wiki/%E4%BB%A5%E5%A4%AA%E7%BD%91" target="_blank" style="margin:0px; padding:0px; list-style-type:none; border:none; color:rgb(17,34,51)">&quot;以太网&quot;</a>（Ethernet）的协议，占据了主导地位。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
以太网规定，一组电信号构成一个数据包，叫做&quot;帧&quot;（Frame）。每一帧分成两个部分：标头（Head）和数据（Data）。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052904.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
&quot;标头&quot;包含数据包的一些说明项，比如发送者、接受者、数据类型等等；&quot;数据&quot;则是数据包的具体内容。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
&quot;标头&quot;的长度，固定为18字节。&quot;数据&quot;的长度，最短为46字节，最长为1500字节。因此，整个&quot;帧&quot;最短为64字节，最长为1518字节。如果数据很长，就必须分割成多个帧进行发送。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">3.3 MAC地址</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
上面提到，以太网数据包的&quot;标头&quot;，包含了发送者和接受者的信息。那么，发送者和接受者是如何标识呢？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
以太网规定，连入网络的所有设备，都必须具有&quot;网卡&quot;接口。数据包必须是从一块网卡，传送到另一块网卡。网卡的地址，就是数据包的发送地址和接收地址，这叫做MAC地址。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052905.jpg" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
每块网卡出厂的时候，都有一个全世界独一无二的MAC地址，长度是48个二进制位，通常用12个十六进制数表示。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052906.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
前6个十六进制数是厂商编号，后6个是该厂商的网卡流水号。有了MAC地址，就可以定位网卡和数据包的路径了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">3.4 广播</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
定义地址只是第一步，后面还有更多的步骤。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
首先，一块网卡怎么会知道另一块网卡的MAC地址？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
回答是有一种ARP协议，可以解决这个问题。这个留到后面介绍，这里只需要知道，以太网数据包必须知道接收方的MAC地址，然后才能发送。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
其次，就算有了MAC地址，系统怎样才能把数据包准确送到接收方？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
回答是以太网采用了一种很&quot;原始&quot;的方式，它不是把数据包准确送到接收方，而是向本网络内所有计算机发送，让每台计算机自己判断，是否为接收方。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052907.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
上图中，1号计算机向2号计算机发送一个数据包，同一个子网络的3号、4号、5号计算机都会收到这个包。它们读取这个包的&quot;标头&quot;，找到接收方的MAC地址，然后与自身的MAC地址相比较，如果两者相同，就接受这个包，做进一步处理，否则就丢弃这个包。这种发送方式就叫做&quot;广播&quot;（broadcasting）。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
有了数据包的定义、网卡的MAC地址、广播的发送方式，&quot;链接层&quot;就可以在多台计算机之间传送数据了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">四、网络层</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">4.1 网络层的由来</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
以太网协议，依靠MAC地址发送数据。理论上，单单依靠MAC地址，上海的网卡就可以找到洛杉矶的网卡了，技术上是可以实现的。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
但是，这样做有一个重大的缺点。以太网采用广播方式发送数据包，所有成员人手一&quot;包&quot;，不仅效率低，而且局限在发送者所在的子网络。也就是说，如果两台计算机不在同一个子网络，广播是传不过去的。这种设计是合理的，否则互联网上每一台计算机都会收到所有包，那会引起灾难。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
互联网是无数子网络共同组成的一个巨型网络，很像想象上海和洛杉矶的电脑会在同一个子网络，这几乎是不可能的。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052914.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
因此，必须找到一种方法，能够区分哪些MAC地址属于同一个子网络，哪些不是。如果是同一个子网络，就采用广播方式发送，否则就采用&quot;路由&quot;方式发送。（&quot;路由&quot;的意思，就是指如何向不同的子网络分发数据包，这是一个很大的主题，本文不涉及。）遗憾的是，MAC地址本身无法做到这一点。它只与厂商有关，与所处网络无关。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">这就导致了&quot;网络层&quot;的诞生。它的作用是引进一套新的地址，使得我们能够区分不同的计算机是否属于同一个子网络。这套地址就叫做&quot;网络地址&quot;，简称&quot;网址&quot;。</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
于是，&quot;网络层&quot;出现以后，每台计算机有了两种地址，一种是MAC地址，另一种是网络地址。两种地址之间没有任何联系，MAC地址是绑定在网卡上的，网络地址则是管理员分配的，它们只是随机组合在一起。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
网络地址帮助我们确定计算机所在的子网络，MAC地址则将数据包送到该子网络中的目标网卡。因此，从逻辑上可以推断，必定是先处理网络地址，然后再处理MAC地址。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">4.2 IP协议</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
规定网络地址的协议，叫做IP协议。它所定义的地址，就被称为IP地址。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
目前，广泛采用的是IP协议第四版，简称IPv4。这个版本规定，网络地址由32个二进制位组成。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052908.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
习惯上，我们用分成四段的十进制数表示IP地址，从0.0.0.0一直到255.255.255.255。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
互联网上的每一台计算机，都会分配到一个IP地址。这个地址分成两个部分，前一部分代表网络，后一部分代表主机。比如，IP地址172.16.254.1，这是一个32位的地址，假定它的网络部分是前24位（172.16.254），那么主机部分就是后8位（最后的那个1）。处于同一个子网络的电脑，它们IP地址的网络部分必定是相同的，也就是说172.16.254.2应该与172.16.254.1处在同一个子网络。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
但是，问题在于单单从IP地址，我们无法判断网络部分。还是以172.16.254.1为例，它的网络部分，到底是前24位，还是前16位，甚至前28位，从IP地址上是看不出来的。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
那么，怎样才能从IP地址，判断两台计算机是否属于同一个子网络呢？这就要用到另一个参数&quot;子网掩码&quot;（subnet mask）。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
所谓&quot;子网掩码&quot;，就是表示子网络特征的一个参数。它在形式上等同于IP地址，也是一个32位二进制数字，它的网络部分全部为1，主机部分全部为0。比如，IP地址172.16.254.1，如果已知网络部分是前24位，主机部分是后8位，那么子网络掩码就是11111111.11111111.11111111.00000000，写成十进制就是255.255.255.0。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
知道&quot;子网掩码&quot;，我们就能判断，任意两个IP地址是否处在同一个子网络。方法是将两个IP地址与子网掩码分别进行AND运算（两个数位都为1，运算结果为1，否则为0），然后比较结果是否相同，如果是的话，就表明它们在同一个子网络中，否则就不是。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
比如，已知IP地址172.16.254.1和172.16.254.233的子网掩码都是255.255.255.0，请问它们是否在同一个子网络？两者与子网掩码分别进行AND运算，结果都是172.16.254.0，因此它们在同一个子网络。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
总结一下，IP协议的作用主要有两个，一个是为每一台计算机分配IP地址，另一个是确定哪些地址在同一个子网络。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">4.3 IP数据包</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
根据IP协议发送的数据，就叫做IP数据包。不难想象，其中必定包括IP地址信息。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
但是前面说过，以太网数据包只包含MAC地址，并没有IP地址的栏位。那么是否需要修改数据定义，再添加一个栏位呢？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
回答是不需要，我们可以把IP数据包直接放进以太网数据包的&quot;数据&quot;部分，因此完全不用修改以太网的规&#26684;。这就是互联网分层结构的好处：上层的变动完全不涉及下层的结构。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
具体来说，IP数据包也分为&quot;标头&quot;和&quot;数据&quot;两个部分。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052909.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
&quot;标头&quot;部分主要包括版本、长度、IP地址等信息，&quot;数据&quot;部分则是IP数据包的具体内容。它放进以太网数据包后，以太网数据包就变成了下面这样。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052910.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
IP数据包的&quot;标头&quot;部分的长度为20到60字节，整个数据包的总长度最大为65,535字节。因此，理论上，一个IP数据包的&quot;数据&quot;部分，最长为65,515字节。前面说过，以太网数据包的&quot;数据&quot;部分，最长只有1500字节。因此，如果IP数据包超过了1500字节，它就需要分割成几个以太网数据包，分开发送了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">4.4 ARP协议</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
关于&quot;网络层&quot;，还有最后一点需要说明。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
因为IP数据包是放在以太网数据包里发送的，所以我们必须同时知道两个地址，一个是对方的MAC地址，另一个是对方的IP地址。通常情况下，对方的IP地址是已知的（后文会解释），但是我们不知道它的MAC地址。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
所以，我们需要一种机制，能够从IP地址得到MAC地址。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
这里又可以分成两种情况。第一种情况，如果两台主机不在同一个子网络，那么事实上没有办法得到对方的MAC地址，只能把数据包传送到两个子网络连接处的&quot;网关&quot;（gateway），让网关去处理。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
第二种情况，如果两台主机在同一个子网络，那么我们可以用ARP协议，得到对方的MAC地址。ARP协议也是发出一个数据包（包含在以太网数据包中），其中包含它所要查询主机的IP地址，在对方的MAC地址这一栏，填的是FF:FF:FF:FF:FF:FF，表示这是一个&quot;广播&quot;地址。它所在子网络的每一台主机，都会收到这个数据包，从中取出IP地址，与自身的IP地址进行比较。如果两者相同，都做出回复，向对方报告自己的MAC地址，否则就丢弃这个包。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
总之，有了ARP协议之后，我们就可以得到同一个子网络内的主机MAC地址，可以把数据包发送到任意一台主机之上了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">五、传输层</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">5.1 传输层的由来</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
有了MAC地址和IP地址，我们已经可以在互联网上任意两台主机上建立通信。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
接下来的问题是，同一台主机上有许多程序都需要用到网络，比如，你一边浏览网页，一边与朋友在线聊天。当一个数据包从互联网上发来的时候，你怎么知道，它是表示网页的内容，还是表示在线聊天的内容？</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
也就是说，我们还需要一个参数，表示这个数据包到底供哪个程序（进程）使用。这个参数就叫做&quot;端口&quot;（port），它其实是每一个使用网卡的程序的编号。每个数据包都发到主机的特定端口，所以不同的程序就能取到自己所需要的数据。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
&quot;端口&quot;是0到65535之间的一个整数，正好16个二进制位。0到1023的端口被系统占用，用户只能选用大于1023的端口。不管是浏览网页还是在线聊天，应用程序会随机选用一个端口，然后与服务器的相应端口联系。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">&quot;传输层&quot;的功能，就是建立&quot;端口到端口&quot;的通信。相比之下，&quot;网络层&quot;的功能是建立&quot;主机到主机&quot;的通信。只要确定主机和端口，我们就能实现程序之间的交流。</span>因此，Unix系统就把主机&#43;端口，叫做&quot;套接字&quot;（socket）。有了它，就可以进行网络应用程序开发了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">5.2 UDP协议</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
现在，我们必须在数据包中加入端口信息，这就需要新的协议。最简单的实现叫做UDP协议，它的&#26684;式几乎就是在数据前面，加上端口号。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
UDP数据包，也是由&quot;标头&quot;和&quot;数据&quot;两部分组成。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052911.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
&quot;标头&quot;部分主要定义了发出端口和接收端口，&quot;数据&quot;部分就是具体的内容。然后，把整个UDP数据包放入IP数据包的&quot;数据&quot;部分，而前面说过，IP数据包又是放在以太网数据包之中的，所以整个以太网数据包现在变成了下面这样：</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052912.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
UDP数据包非常简单，&quot;标头&quot;部分一共只有8个字节，总长度不超过65,535字节，正好放进一个IP数据包。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">5.3 TCP协议</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
UDP协议的优点是比较简单，容易实现，但是缺点是可靠性较差，一旦数据包发出，无法知道对方是否收到。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
为了解决这个问题，提高网络可靠性，TCP协议就诞生了。这个协议非常复杂，但可以近&#20284;认为，它就是有确认机制的UDP协议，每发出一个数据包都要求确认。如果有一个数据包遗失，就收不到确认，发出方就知道有必要重发这个数据包了。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
因此，TCP协议能够确保数据不会遗失。它的缺点是过程复杂、实现困难、消耗较多的资源。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
TCP数据包和UDP数据包一样，都是内嵌在IP数据包的&quot;数据&quot;部分。TCP数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常TCP数据包的长度不会超过IP数据包的长度，以确保单个TCP数据包不必再分割。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">六、应用层</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
应用程序收到&quot;传输层&quot;的数据，接下来就要进行解读。由于互联网是开放架构，数据来源五花八门，必须事先规定好&#26684;式，否则根本无法解读。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<span style="font-weight:800">&quot;应用层&quot;的作用，就是规定应用程序的数据&#26684;式。</span></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
举例来说，TCP协议可以为各种各样的程序传递数据，比如Email、WWW、FTP等等。那么，必须有不同协议规定电子邮件、网页、FTP数据的&#26684;式，这些应用程序协议就构成了&quot;应用层&quot;。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
这是最高的一层，直接面对用户。它的数据就放在TCP数据包的&quot;数据&quot;部分。因此，现在的以太网的数据包就变成下面这样。</p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
<img src="http://image.beekka.com/blog/201205/bg2012052913.png" alt="" style="margin:0px; padding:0px; list-style-type:none; border:0.7em solid rgb(224,223,204)"></p>
<p style="margin-top:1em; margin-bottom:0px; margin-left:0.8em; padding-top:0px; padding-bottom:0px; list-style-type:none; border:none; color:rgb(17,17,17); font-size:1.6em; line-height:28px; font-family:Georgia,serif; letter-spacing:-0.11999999731779099px; word-spacing:2.4000000953674316px; background-color:rgb(245,245,213)">
至此，整个互联网的五层结构，自下而上全部讲完了。这是从系统的角度，解释互联网是如何构成的。<a target="_blank" href="http://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html" target="_blank" style="margin:0px; padding:0px; list-style-type:none; border:none; color:rgb(17,34,51)">下一篇</a>，我反过来，从用户的角度，自上而下看看这个结构是如何发挥作用，完成一次网络数据交换的。</p>
 </div>

          </div>

                               

             <div class="blog_handle">
        <span id="digg"  style="cursor:pointer"><i class="iconfont">&#xe60e;</i><em>1</em></span>
        <span id="bury" style="cursor:pointer"><i class="iconfont">&#xe60d;</i><em>0</em></span>
       
    </div>



              <div class="prev_next">
                        <a href="/article/details?id=41961745" class="prev" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_shangyipian']);">上一篇</a>                                                                       
                        <a href="/article/details?id=41962613" class="next" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_shangyipian'])">下一篇</a>
              </div>         
        </div>
        
    

          <script type="text/javascript">
               /*csdn wap端 博客内页-20:3 创建于 2016-05-10*/
               var cpro_id = "u2634430";
            </script>
            <script type="text/javascript" src="http://cpro.baidustatic.com/cpro/ui/cm.js"></script>


       
<script  type="text/javascript"  src="/static/js/highcode.js"></script>
<script type="text/javascript">
    var fileName = '41961917';
    var commentscount = 1;
    var islock = false;
    var currentUserName='github_38885296';
    var topSize=3;
    var listId = ".blog_comment_list";
</script>

<div class="no_comment"  style="display:none"><i class="iconfont">&#xe60a;</i><span>暂无评论，</span><a href="/comment/post?id=41961917">我去发表</a><em>~</em></div>

 <div class="blog_comment"  style="display:none">
       <h3 class="isComment">评论<span>（1）</span></h3>
       <dl class="blog_comment_list"></dl>
       <div class="checkAll"></div>
 </div>

<script  type="text/javascript" src="/static/js/comment.js"></script>



               <div style="display:none" id="tags">color,互联网,tcp,阮一峰,网卡,通信</div>

   
<script type="text/javascript">
    /*wap端-博客内页热门文章上通栏-20:5*/
    var cpro_id = "u2901277";
</script>
<script type="text/javascript" src="http://cpro.baidustatic.com/cpro/ui/cm.js"></script>

       <div class="my_hot_article">
          <h3 class="isArticle">我的热门文章</h3>
          <ul class="hot_article">
                <li><a href="/article/details?id=52523581">解决Ubuntu16.04无法启用WiFi的问题</a></li>
                <li><a href="/article/details?id=42707149">Qt中 .pro 文件和 .pri 文件介绍</a></li>
                <li><a href="/article/details?id=42100029">关于QT构造函数参数parent的解释</a></li>
                <li><a href="/article/details?id=41961917">互联网TCP／IP五层模型（一）</a></li>
                <li><a href="/article/details?id=43116083">ubuntu14.04 + Qt5.4 + opencv2.4.10</a></li>
          </ul>
        </div>

      
<script type="text/javascript">
    /*wap端-博客内页相关博文上通栏-20:5*/
    var cpro_id = "u2901286";
</script>
<script type="text/javascript" src="http://cpro.baidustatic.com/cpro/ui/cm.js"></script>

        <div class="">
        
          <ul class="tracking-ad" id="res" data-mod="popu_36"></ul>
        </div>


<script type="text/javascript" src="//c.csdnimg.cn/rabbit/tracking-ad/main.js?20170531001"></script>








       
      </div>

        
   <div class="leftNav">
      
<div class="left_top">
        <a href="/Blog?username=github_38885296"><img src="http://avatar.csdn.net/5/5/E/1_github_38885296.jpg" alt="github_38885296"></a>
        <a href="/Blog?username=github_38885296" class="sign">github_38885296</a>
</div>
        
        <ul class="nav_list">
            <li><a href="/home/index"><i>&bull;</i><span>首页</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=mobile&Type="><i>&bull;</i><span>移动开发</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=web&Type="><i>&bull;</i><span>Web前端</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=enterprise&Type="><i>&bull;</i><span>架构设计</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=code&Type="><i>&bull;</i><span>编程语言</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=www&Type="><i>&bull;</i><span>互联网</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=database&Type="><i>&bull;</i><span>数据库</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=system&Type="><i>&bull;</i><span>系统运维</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=cloud&Type="><i>&bull;</i><span>云计算</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=software&Type="><i>&bull;</i><span>研发管理</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
                <li><a href="/Column/Column?Channel=other&Type="><i>&bull;</i><span>综合</span><img src="/static/images/iconfont-youjiantou.png" alt="img" class="arrow_r"></a></li>
        </ul>
   </div>
   

      <div id="mask"></div>
    </div>


   

    <div class="backToTop"><img src="/static/images/iconfont-fudongxiangshang.png" alt="img"></div>
    <!--分享弹窗：-->
    <div class="popup_cover"></div>
    <div class="sharePopup_box">
      <div class="sharePopup">
        <!--JiaThis Button BEGIN-->
        <div class="jiathis_style_32x32"><a class="jiathis_button_weixin"><b><i class="iconfont">&#xe605;</i></b><em>微信分享</em></a><a class="jiathis_button_tsina"><b><i class="iconfont">&#xe607;</i></b><em>新浪微博</em></a><a class="jiathis_button_cqq"><b><i class="iconfont">&#xe606;</i></b><em>QQ好友</em></a><a class="jiathis_button_qzone"><b><i class="iconfont">&#xe603;</i></b><em>QQ空间</em></a></div>
        <script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
        <!--JiaThis Button END-->
      </div>
      <div class="sharePopup_cancel">取 消</div>
    </div>
    <script>
      $(function(){
        $('#share_btn').click(function(){
          $('.popup_cover').stop().show();
          $('.sharePopup_box').stop().slideDown();
        });
        $('.sharePopup_cancel').click(function(){
          $('.popup_cover').stop().hide();
          $('.sharePopup_box').stop().slideUp();
        });
      })
    </script>




<script>
    // 指定需要处理的DOM元素
    var cir_recommend_config = {
        _popIn_read_selector: '.blog_article',
        _recommend_article: [
            {
                tid: 10101,
                selector: '#res'
            }
        ]
    };
</script>
<script src="http://cir1.bdstatic.com/static/cir.min.js">
</script>
</body>
 <div class="ad_box">
      <div class="ad_l"><a href="http://ms.csdn.net/download.html"><img src="/static/images/index_AD.jpg" alt="img"></a><span>即使是一小步<br/>也想与你分享</span></div>
      <div class="ad_r"><a href="http://ms.csdn.net/download.html" class="open_btn">打开</a><i class="ad_close iconfont">&#xe60c;</i></div>
    </div>

   <div class="backToTop"  style="z-index:9999999;"><img src="/static/images/iconfont-fudongxiangshang.png" alt="img"></div>
    <div class="blog_footer" >©1999-2012, csdn.net, All Rights Reserved</div>
    <script type="text/javascript" src="/static/js/apps/fontSize.js"></script>
<script type="text/javascript" charset="utf-8" src="http://csdnimg.cn/pubfooter/js/tracking.js?fe68e58"></script>




</html>
